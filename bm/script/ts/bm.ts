class Game {
    public static getInitData():any {
        return {
            teams: {
                '0': {
                    name: '雄鹿',
                    gameNum: 0,
                    winNum: 0,
                    players: ['46', '81', '124', '139', '148'],
                },
                '1': {
                    name: '猛龙',
                    gameNum: 0,
                    winNum: 0,
                    players: ['11', '58', '65', '123', '140'],
                },
                '2': {
                    name: '步行者',
                    gameNum: 0,
                    winNum: 0,
                    players: ['4', '26', '44', '122', '141'],
                },
                '3': {
                    name: '76人',
                    gameNum: 0,
                    winNum: 0,
                    players: ['31', '63', '64', '83', '121'],
                },
                '4': {
                    name: '凯尔特人',
                    gameNum: 0,
                    winNum: 0,
                    players: ['36', '77', '82', '90', '92'],
                },
                '5': {
                    name: '热火',
                    gameNum: 0,
                    winNum: 0,
                    players: ['13', '105', '125', '142', '149'],
                },
                '6': {
                    name: '篮网',
                    gameNum: 0,
                    winNum: 0,
                    players: ['34', '6', '104', '126', '143'],
                },
                '7': {
                    name: '黄蜂',
                    gameNum: 0,
                    winNum: 0,
                    players: ['7', '39', '91', '127', '144'],
                },
                '8': {
                    name: '活塞',
                    gameNum: 0,
                    winNum: 0,
                    players: ['8', '15', '23', '40', '67'],
                },
                '9': {
                    name: '魔术',
                    gameNum: 0,
                    winNum: 0,
                    players: ['17', '57', '60', '74', '128'],
                },
                '10': {
                    name: '奇才',
                    gameNum: 0,
                    winNum: 0,
                    players: ['50', '75', '99', '117', '119'],
                },
                '11': {
                    name: '老鹰',
                    gameNum: 0,
                    winNum: 0,
                    players: ['11', '98', '107', '118', '129'],
                },
                '12': {
                    name: '尼克斯',
                    gameNum: 0,
                    winNum: 0,
                    players: ['21', '22', '59', '66', '68'],
                },
                '13': {
                    name: '公牛',
                    gameNum: 0,
                    winNum: 0,
                    players: ['3', '30', '13', '53', '103'],
                },
                '14': {
                    name: '骑士',
                    gameNum: 0,
                    winNum: 0,
                    players: ['16', '76', '80', '97', '102'],
                },
                '15': {
                    name: '勇士',
                    gameNum: 0,
                    winNum: 0,
                    players: ['61', '85', '109', '130', '145'],
                },
                '16': {
                    name: '掘金',
                    gameNum: 0,
                    winNum: 0,
                    players: ['47', '48', '69', '84', '108'],
                },
                '17': {
                    name: '雷霆',
                    gameNum: 0,
                    winNum: 0,
                    players: ['12', '25', '41', '70', '131'],
                },
                '18': {
                    name: '开拓者',
                    gameNum: 0,
                    winNum: 0,
                    players: ['5', '28', '0', '73', '93'],
                },
                '19': {
                    name: '火箭',
                    gameNum: 0,
                    winNum: 0,
                    players: ['19', '20', '88', '115', '120'],
                },
                '20': {
                    name: '马刺',
                    gameNum: 0,
                    winNum: 0,
                    players: ['72', '87', '94', '114', '132'],
                },
                '21': {
                    name: '快船',
                    gameNum: 0,
                    winNum: 0,
                    players: ['52', '55', '56', '106', '133'],
                },
                '22': {
                    name: '爵士',
                    gameNum: 0,
                    winNum: 0,
                    players: ['18', '54', '86', '134', '146'],
                },
                '23': {
                    name: '湖人',
                    gameNum: 0,
                    winNum: 0,
                    players: ['29', '89', '95', '112', '135'],
                },
                '24': {
                    name: '国王',
                    gameNum: 0,
                    winNum: 0,
                    players: ['27', '32', '35', '113', '136'],
                },
                '25': {
                    name: '森林狼',
                    gameNum: 0,
                    winNum: 0,
                    players: ['7', '10', '49', '62', '100'],
                },
                '26': {
                    name: '鹈鹕',
                    gameNum: 0,
                    winNum: 0,
                    players: ['24', '96', '111', '116', '137'],
                },
                '27': {
                    name: '独行侠',
                    gameNum: 0,
                    winNum: 0,
                    players: ['51', '71', '78', '101', '110'],
                },
                '28': {
                    name: '灰熊',
                    gameNum: 0,
                    winNum: 0,
                    players: ['14', '37', '79', '138', '147'],
                },
                '29': {
                    name: '太阳',
                    gameNum: 0,
                    winNum: 0,
                    players: ['1', '2', '6', '33', '45'],
                },
            },
            players: {
                '0': {
                    name: '测试',
                    ability: 1,
                    maxPoints: 0,
                },
                '1': {
                    name: '测试球员',
                    ability: 1,
                    maxPoints: 0,
                },
                '2': {
                    name: '詹姆斯',
                    ability: 7,
                    maxPoints: 0,
                },
                '3': {
                    name: '科比',
                    ability: 7,
                    maxPoints: 0,
                },
                '4': {
                    name: '丁老头',
                    ability: 5,
                    maxPoints: 0,
                },
                '5': {
                    name: '王尼玛',
                    ability: 3,
                    maxPoints: 0,
                },
                '6': {
                    name: '奥尼尔',
                    ability: 7,
                    maxPoints: 0,
                },
                '7': {
                    name: '马大哈',
                    ability: 5,
                    maxPoints: 0,
                },
                '8': {
                    name: '马大头',
                    ability: 3,
                    maxPoints: 0,
                },
                '9': {
                    name: '黑人问号',
                    ability: 3,
                    maxPoints: 0,
                },
                '10': {
                    name: '巴克利',
                    ability: 5,
                    maxPoints: 0,
                },
                '11': {
                    name: '佩奇',
                    ability: 2,
                    maxPoints: 0,
                },
                '12': {
                    name: '喜羊羊',
                    ability: 3,
                    maxPoints: 0,
                },
                '13': {
                    name: '灰太狼',
                    ability: 4,
                    maxPoints: 0,
                },
                '14': {
                    name: '小猪猪',
                    ability: 2,
                    maxPoints: 0,
                },
                '15': {
                    name: '小菜鸡',
                    ability: 1,
                    maxPoints: 0,
                },
                '16': {
                    name: '乔丹',
                    ability: 8,
                    maxPoints: 0,
                },
                '17': {
                    name: '哈登',
                    ability: 6,
                    maxPoints: 0,
                },
                '18': {
                    name: '欧文',
                    ability: 5,
                    maxPoints: 0,
                },
                '19': {
                    name: '邓肯',
                    ability: 7,
                    maxPoints: 0,
                },
                '20': {
                    name: '奥拉朱旺',
                    ability: 7,
                    maxPoints: 0,
                },
                '21': {
                    name: '巴拉拉小魔仙',
                    ability: 4,
                    maxPoints: 0,
                },
                '22': {
                    name: '丁威迪',
                    ability: 4,
                    maxPoints: 0,
                },
                '23': {
                    name: '安东尼',
                    ability: 6,
                    maxPoints: 0,
                },
                '24': {
                    name: '韦德',
                    ability: 6,
                    maxPoints: 0,
                },
                '25': {
                    name: '字母哥',
                    ability: 6,
                    maxPoints: 0,
                },
                '26': {
                    name: '中文哥',
                    ability: 3,
                    maxPoints: 0,
                },
                '27': {
                    name: '周琦',
                    ability: 3,
                    maxPoints: 0,
                },
                '28': {
                    name: '姚明',
                    ability: 6,
                    maxPoints: 0,
                },
                '29': {
                    name: '路飞',
                    ability: 5,
                    maxPoints: 0,
                },
                '30': {
                    name: '孙悟空',
                    ability: 4,
                    maxPoints: 0,
                },
                '31': {
                    name: '牛魔王',
                    ability: 1,
                    maxPoints: 0,
                },
                '32': {
                    name: '电鳗',
                    ability: 1,
                    maxPoints: 0,
                },
                '33': {
                    name: '抖音哥',
                    ability: 6,
                    maxPoints: 0,
                },
                '34': {
                    name: '字母弟',
                    ability: 2,
                    maxPoints: 0,
                },
                '35': {
                    name: '哈哈哈登',
                    ability: 4,
                    maxPoints: 0,
                },
                '36': {
                    name: '辣个男人',
                    ability: 6,
                    maxPoints: 0,
                },
                '37': {
                    name: '麦迪',
                    ability: 6,
                    maxPoints: 0,
                },
                '38': {
                    name: '取名很难',
                    ability: 2,
                    maxPoints: 0,
                },
                '39': {
                    name: '小明',
                    ability: 2,
                    maxPoints: 0,
                },
                '40': {
                    name: '小红',
                    ability: 5,
                    maxPoints: 0,
                },
                '41': {
                    name: '路人甲',
                    ability: 1,
                    maxPoints: 0,
                },
                '42': {
                    name: '路人乙',
                    ability: 2,
                    maxPoints: 0,
                },
                '43': {
                    name: '路人丙',
                    ability: 3,
                    maxPoints: 0,
                },
                '44': {
                    name: '路人丁',
                    ability: 4,
                    maxPoints: 0,
                },
                '45': {
                    name: '路人戊',
                    ability: 5,
                    maxPoints: 0,
                },
                '46': {
                    name: '路人己',
                    ability: 6,
                    maxPoints: 0,
                },
                '47': {
                    name: '孔乙己',
                    ability: 7,
                    maxPoints: 0,
                },
                '48': {
                    name: '五五开',
                    ability: 4,
                    maxPoints: 0,
                },
                '49': {
                    name: '六六开',
                    ability: 4,
                    maxPoints: 0,
                },
                '50': {
                    name: '三七开',
                    ability: 3,
                    maxPoints: 0,
                },
                '51': {
                    name: '91唐',
                    ability: 4,
                    maxPoints: 0,
                },
                '52': {
                    name: '哈登',
                    ability: 6,
                    maxPoints: 0,
                },
                '53': {
                    name: '戈登',
                    ability: 3,
                    maxPoints: 0,
                },
                '54': {
                    name: '保罗',
                    ability: 5,
                    maxPoints: 0,
                },
                '55': {
                    name: '会涨的',
                    ability: 1,
                    maxPoints: 0,
                },
                '56': {
                    name: '阿珍',
                    ability: 5,
                    maxPoints: 0,
                },
                '57': {
                    name: '阿强',
                    ability: 3,
                    maxPoints: 0,
                },
                '58': {
                    name: '光头强',
                    ability: 1,
                    maxPoints: 0,
                },
                '59': {
                    name: '熊大',
                    ability: 5,
                    maxPoints: 0,
                },
                '60': {
                    name: '熊二',
                    ability: 6,
                    maxPoints: 0,
                },
                '61': {
                    name: '哦',
                    ability: 2,
                    maxPoints: 0,
                },
                '62': {
                    name: '莱恩俺的森',
                    ability: 2,
                    maxPoints: 0,
                },
                '63': {
                    name: '凑人数的',
                    ability: 1,
                    maxPoints: 0,
                },
                '64': {
                    name: '记不住名字的',
                    ability: 4,
                    maxPoints: 0,
                },
                '65': {
                    name: '叫不出名字的',
                    ability: 2,
                    maxPoints: 0,
                },
                '66': {
                    name: '西米露奶茶',
                    ability: 2,
                    maxPoints: 0,
                },
                '67': {
                    name: '利文斯顿',
                    ability: 3,
                    maxPoints: 0,
                },
                '68': {
                    name: '渣渣',
                    ability: 0,
                    maxPoints: 0,
                },
                '69': {
                    name: '音响',
                    ability: 4,
                    maxPoints: 0,
                },
                '70': {
                    name: '小白',
                    ability: 4,
                    maxPoints: 0,
                },
                '71': {
                    name: '三条',
                    ability: 4,
                    maxPoints: 0,
                },
                '72': {
                    name: '五条',
                    ability: 4,
                    maxPoints: 0,
                },
                '73': {
                    name: '某个布鲁克斯',
                    ability: 4,
                    maxPoints: 0,
                },
                '74': {
                    name: '肖华',
                    ability: 4,
                    maxPoints: 0,
                },
                '75': {
                    name: '小托马斯',
                    ability: 4,
                    maxPoints: 0,
                },
                '76': {
                    name: '波蒂斯',
                    ability: 4,
                    maxPoints: 0,
                },
                '77': {
                    name: '布克',
                    ability: 6,
                    maxPoints: 0,
                },
                '78': {
                    name: '恩比德',
                    ability: 4,
                    maxPoints: 0,
                },
                '79': {
                    name: '罗斯',
                    ability: 5,
                    maxPoints: 0,
                },
                '80': {
                    name: '林书豪',
                    ability: 5,
                    maxPoints: 0,
                },
                '81': {
                    name: '拉塞尔',
                    ability: 4,
                    maxPoints: 0,
                },
                '82': {
                    name: '球哥',
                    ability: 4,
                    maxPoints: 0,
                },
                '83': {
                    name: '球爹',
                    ability: 4,
                    maxPoints: 0,
                },
                '84': {
                    name: '二球',
                    ability: 4,
                    maxPoints: 0,
                },
                '85': {
                    name: '三球',
                    ability: 4,
                    maxPoints: 0,
                },
                '86': {
                    name: '海沃德',
                    ability: 4,
                    maxPoints: 0,
                },
                '87': {
                    name: '霍福德',
                    ability: 4,
                    maxPoints: 0,
                },
                '88': {
                    name: '特雷杨',
                    ability: 4,
                    maxPoints: 0,
                },
                '89': {
                    name: '贝兹摩尔',
                    ability: 4,
                    maxPoints: 0,
                },
                '90': {
                    name: '科林斯',
                    ability: 4,
                    maxPoints: 0,
                },
                '91': {
                    name: '呆的萌',
                    ability: 4,
                    maxPoints: 0,
                },
                '92': {
                    name: '卡特',
                    ability: 4,
                    maxPoints: 0,
                },
                '93': {
                    name: '迈尔斯-普拉姆利',
                    ability: 4,
                    maxPoints: 0,
                },
                '94': {
                    name: '维金斯',
                    ability: 4,
                    maxPoints: 0,
                },
                '95': {
                    name: '的哥',
                    ability: 4,
                    maxPoints: 0,
                },
                '96': {
                    name: '巴特勒',
                    ability: 5,
                    maxPoints: 0,
                },
                '97': {
                    name: '沙里奇',
                    ability: 4,
                    maxPoints: 0,
                },
                '98': {
                    name: '考文顿',
                    ability: 4,
                    maxPoints: 0,
                },
                '99': {
                    name: '吉布森',
                    ability: 4,
                    maxPoints: 0,
                },
                '100': {
                    name: '娜娜利',
                    ability: 4,
                    maxPoints: 0,
                },
                '101': {
                    name: '洛尔邓',
                    ability: 4,
                    maxPoints: 0,
                },
                '102': {
                    name: '南斯',
                    ability: 4,
                    maxPoints: 0,
                },
                '103': {
                    name: '乐福',
                    ability: 4,
                    maxPoints: 0,
                },
                '104': {
                    name: '克拉克森',
                    ability: 4,
                    maxPoints: 0,
                },
                '105': {
                    name: '科沃尔',
                    ability: 4,
                    maxPoints: 0,
                },
                '106': {
                    name: '奥斯曼',
                    ability: 4,
                    maxPoints: 0,
                },
                '107': {
                    name: '塞克斯顿',
                    ability: 4,
                    maxPoints: 0,
                },
                '108': {
                    name: '焦志喜',
                    ability: 4,
                    maxPoints: 0,
                },
                '109': {
                    name: '胡德',
                    ability: 4,
                    maxPoints: 0,
                },
                '110': {
                    name: '弗莱',
                    ability: 4,
                    maxPoints: 0,
                },
                '111': {
                    name: '米罗蒂奇',
                    ability: 4,
                    maxPoints: 0,
                },
                '112': {
                    name: '冰箱',
                    ability: 4,
                    maxPoints: 0,
                },
                '113': {
                    name: '海尔哥哥',
                    ability: 3,
                    maxPoints: 0,
                },
                '114': {
                    name: '海尔弟弟',
                    ability: 6,
                    maxPoints: 0,
                },
                '115': {
                    name: '小猫咪',
                    ability: 4,
                    maxPoints: 0,
                },
                '116': {
                    name: '挂逼',
                    ability: 8,
                    maxPoints: 0,
                },
                '117': {
                    name: '克拉克',
                    ability: 4,
                    maxPoints: 0,
                },
                '118': {
                    name: '阿金萨',
                    ability: 4,
                    maxPoints: 0,
                },
                '119': {
                    name: '库里',
                    ability: 6,
                    maxPoints: 0,
                },
                '120': {
                    name: '杜小帅',
                    ability: 6,
                    maxPoints: 0,
                },
                '121': {
                    name: '米尔萨普',
                    ability: 4,
                    maxPoints: 0,
                },
                '122': {
                    name: '马里克-比斯利',
                    ability: 4,
                    maxPoints: 0,
                },
                '123': {
                    name: '巴顿',
                    ability: 4,
                    maxPoints: 0,
                },
                '124': {
                    name: '埃尔南戈麦斯',
                    ability: 4,
                    maxPoints: 0,
                },
                '125': {
                    name: '二五仔',
                    ability: 4,
                    maxPoints: 0,
                },
                '126': {
                    name: '贾马尔-穆雷',
                    ability: 4,
                    maxPoints: 0,
                },
                '127': {
                    name: '历史老师',
                    ability: 4,
                    maxPoints: 0,
                },
                '128': {
                    name: '生物老师',
                    ability: 4,
                    maxPoints: 0,
                },
                '129': {
                    name: '体育老师',
                    ability: 6,
                    maxPoints: 0,
                },
                '130': {
                    name: '大天狗',
                    ability: 4,
                    maxPoints: 0,
                },
                '131': {
                    name: '小田狗',
                    ability: 4,
                    maxPoints: 0,
                },
                '132': {
                    name: '哈士奇',
                    ability: 4,
                    maxPoints: 0,
                },
                '133': {
                    name: '萝卜丝',
                    ability: 4,
                    maxPoints: 0,
                },
                '134': {
                    name: '放假啦',
                    ability: 4,
                    maxPoints: 0,
                },
                '135': {
                    name: '放牛娃',
                    ability: 4,
                    maxPoints: 0,
                },
                '136': {
                    name: '吕小布',
                    ability: 4,
                    maxPoints: 0,
                },
                '137': {
                    name: '尼克杨',
                    ability: 4,
                    maxPoints: 0,
                },
                '138': {
                    name: '后羿',
                    ability: 4,
                    maxPoints: 0,
                },
                '139': {
                    name: '巨神兵',
                    ability: 4,
                    maxPoints: 0,
                },
                '140': {
                    name: '外国人',
                    ability: 4,
                    maxPoints: 0,
                },
                '141': {
                    name: '歪果仁',
                    ability: 4,
                    maxPoints: 0,
                },
                '142': {
                    name: '雷公',
                    ability: 4,
                    maxPoints: 0,
                },
                '143': {
                    name: '电母',
                    ability: 4,
                    maxPoints: 0,
                },
                '144': {
                    name: '飞天螳螂',
                    ability: 4,
                    maxPoints: 0,
                },
                '145': {
                    name: '第六人',
                    ability: 4,
                    maxPoints: 0,
                },
                '146': {
                    name: '耶稣',
                    ability: 4,
                    maxPoints: 0,
                },
                '147': {
                    name: '他大舅',
                    ability: 4,
                    maxPoints: 0,
                },
                '148': {
                    name: '他二舅',
                    ability: 4,
                    maxPoints: 0,
                },
                '149': {
                    name: '高桌子',
                    ability: 4,
                    maxPoints: 0,
                },
            },
            news: [
                {
                    season: 1,
                    day: 1,
                    content: '欢迎进入游戏，你的球队是 太阳'
                }
            ],
            userTeam: '太阳',
            userTeamId: '29',
            currentSeason: 1,
            currentDay: 1,
            showState: ShowState.MyTeam,
        }
    };

    private static calcScore(player: any): number {
        return 0;
    }

    public static nextDay(gameData: any): any {
        let homeTeam: any = Math.floor(Math.random() * 30);
        let visitor: any = Math.floor(Math.random() * 30);
        while(homeTeam === visitor) {
            visitor = Math.floor(Math.random() * 30);
        }
        homeTeam = gameData.teams[homeTeam];
        visitor = gameData.teams[visitor];
        const homeTeamName = homeTeam.name;
        const visitorName = visitor.name;
        let homeScore = 0;
        let visitorScore = 0;
        let homePlayers = homeTeam.players;
        let visitorPlayers = visitor.players;
        for(let i = 0; i < homePlayers.length; i ++) {
            let player = gameData.players[homePlayers[i]];
            let score = Math.floor((Math.random() * player.ability * 6) + Math.random() * 6);
            homeScore += score;
        }
        do {
            for(let i = 0; i < visitorPlayers.length; i ++) {
                let player = gameData.players[visitorPlayers[i]];
                let score = Math.floor((Math.random() * player.ability * 6) + Math.random() * 6);
                visitorScore += score;
            }
        }while(homeScore === visitorScore);
        gameData.news.push({
            season: gameData.currentSeason,
            day: gameData.currentDay,
            content: homeTeamName + '和' + visitorName + '打了比赛<br />' 
                + '比分' + homeScore + ':' + visitorScore,
        });
        gameData.showState = ShowState.News;
        gameData.currentDay += 1;
    }

    public static getPlayerInfo(id: string, gameData: any): any {
        return gameData.players[id];
    }
}

enum ShowState {
    MyTeam,
    TeamRank,
    News,
    Statistics,
}

class TimeUtil {
    public static getTimeString(): any {
        let datetime = new Date();
        return datetime.getFullYear() + '-'
            + (datetime.getMonth() + 1) + '-'
            + datetime.getDate() + 'T'
            + datetime.getHours() + '-'
            + datetime.getMinutes() + '-'
            + datetime.getSeconds();
    }
}

class FileUtil {
    public static createBlob(content: any):any {
        let blob;
        try {
            blob = new Blob([content], {
                type: "text/plain;charset=utf-8"
            });
        } catch(e) {
            (<any>window).BlobBuilder = (<any>window).BlobBuilder ||
                (<any>window).WebkitBlobBuilder ||
                (<any>window).MozBlobBuilder ||
                (<any>window).MSBlobBuilder;
            if(e.name == 'TypeError' && (<any>window).BlobBuilder) {
                let bb = new BlobBuilder();
                bb.append([content]);
                blob = bb.getBlob("text/plain;charset=utf-8");
            } else if(e.name == 'InvalidStateError') {
                blob = new Blob([content.buffer], {type: "text/plain;charset=utf-8"});
            }
        }
        return blob;
    }
}

class TemplateUtil {
    public static createPlayerLine(player: any): any {
        const lineTemplate = `
        <div class='gameLine'>
            <span>${player.name}</span>
        </div>
        `;
        let newNode = new DOMParser().parseFromString(lineTemplate, 'text/html').querySelector('.gameLine');
        return newNode;
    }

    public static createNewsLine(day: any, season: any, content: any): any {
        const template = `
        <div class='leftLine'>
            <p><span>第${day}天&nbsp;</span><span>第${season}赛季</span></p>
            <p>${content}</p>
        </div>
        `;
        let newNode = new DOMParser().parseFromString(template, 'text/html').querySelector('.leftLine');
        return newNode;
    }
    
    public static createLine(text: any): any {
        const lineTemplate = `
        <div class='gameLine'>
            <span>${text}</span>
        </div>
        `;
        let newNode = new DOMParser().parseFromString(lineTemplate, 'text/html').querySelector('.gameLine');
        return newNode;
    }

    public static createTeamLine(teamId: any, gameData: any): any {
        const teamName = gameData.teams[teamId].name;
        console.log(teamName);
        const lineTemplate = `
        <div class='gameLine' onclick='showTeamInfo(${teamId})'>
            <span>${teamName}</span>
        </div>
        `;
        let newNode = new DOMParser().parseFromString(lineTemplate, 'text/html').querySelector('.gameLine');
        return newNode;
    }
}